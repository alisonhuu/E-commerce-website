"use strict";(self["webpackChunkfinalproject"]=self["webpackChunkfinalproject"]||[]).push([[982],{9390:function(t,e,i){i.d(e,{Z:function(){return b}});var s=i(3396),a=i(7139);const r={"aria-label":"breadcrumb"},o={class:"breadcrumb"},n={class:"breadcrumb-item"},c={class:"breadcrumb-item active","aria-current":"page"},u={class:"my-5 text-center"},l={class:"h4"},d={class:"h4 font-mirza ms-2"};function p(t,e){const i=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("nav",r,[(0,s._)("ol",o,[(0,s._)("li",n,[(0,s.Wm)(i,{to:"/"},{default:(0,s.w5)((()=>[(0,s.Uk)("首頁")])),_:1})]),(0,s._)("li",c,(0,a.zw)(t.$route.name),1)])]),(0,s._)("div",u,[(0,s._)("span",l,(0,a.zw)(t.$route.name),1),(0,s._)("span",d,(0,a.zw)(this.$route.meta.name),1)])],64)}var h=i(89);const m={},g=(0,h.Z)(m,[["render",p]]);var b=g},5424:function(t,e,i){i.d(e,{Z:function(){return C}});var s=i(3396),a=i(9242),r=i(7139);const o={class:"my-4"},n={class:"row row-cols-2 row-cols-md-4 gx-3 gy-5"},c=["onClick"],u={class:"position-absolute bottom-0 end-0 p-1"},l=["onClick"],d=["onClick","disabled"],p=(0,s._)("i",{class:"bi bi-cart"},null,-1),h=[p],m={key:0,class:"position-absolute top-0 start-0 px-2 py-1"},g=(0,s._)("i",{class:"bi bi-gift text-danger"},null,-1),b=[g],v=["onClick"],f={class:"card-text fw-bold text-secondary mt-2"};function _(t,e,i,p,g,_){const k=(0,s.up)("LoadingCom");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(k,{active:g.isLoading},null,8,["active"]),(0,s._)("main",null,[(0,s._)("section",o,[(0,s._)("div",n,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.products,(e=>((0,s.wg)(),(0,s.iD)("div",{class:"col",key:e.id},[(0,s._)("a",{href:"javascript:;",onClick:(0,a.iM)((t=>_.getProduct(e.id)),["prevent"])},[(0,s._)("div",{style:(0,r.j5)({backgroundImage:`url(${e.imageUrl})`}),class:"product-img bg-center rounded mb-3 position-relative"},[(0,s._)("div",u,[(0,s._)("button",{class:"btn btn-sm btn-light rounded-4",type:"button",onClick:(0,a.iM)((t=>_.addToWishList(e)),["stop"])},[(0,s._)("i",{class:(0,r.C_)(["bi",_.heart(e)])},null,2)],8,l),(0,s._)("button",{class:"btn btn-sm btn-light rounded-4 ms-1",type:"button",onClick:(0,a.iM)((t=>_.addToCart(e)),["stop"]),disabled:g.loadingItem===e.id},h,8,d)]),e.is_gift?((0,s.wg)(),(0,s.iD)("div",m,b)):(0,s.kq)("",!0)],4)],8,c),(0,s._)("a",{href:"javascript:;",onClick:(0,a.iM)((t=>_.getProduct(e.id)),["prevent"]),class:"h6 link-dark-h"},(0,r.zw)(e.title),9,v),(0,s._)("p",f,(0,r.zw)(t.$filters.currency(e.price)),1)])))),128))])])])],64)}i(7658);var k={data(){return{isLoading:!1,loadingItem:""}},props:{products:{type:Array,default(){return[]}}},methods:{getProduct(t){this.$router.push(`/user/product/${t}`)},addToCart(t){this.loadingItem=t.id,this.isLoading=!0;const e="https://vue3-course-api.hexschool.io/api/alisonhu-api/cart",i={product_id:t.id,qty:1};this.axios.post(e,{data:i}).then((t=>{this.loadingItem="",this.isLoading=!1,this.PushMessageState(t,"加入購物車"),this.emitter.emit("cart-qty")}))},addToWishList(t){localStorage.getItem(t.id)?(localStorage.removeItem(t.id),this.emitter.emit("wished-qty")):(localStorage.setItem(t.id,JSON.stringify(t)),this.emitter.emit("wished-qty")),this.$emit("get-products")},heart(t){return localStorage.getItem(t.id)?"bi-heart-fill":"bi-heart"}},emits:["get-products"],inject:["emitter","PushMessageState"]},w=i(89);const y=(0,w.Z)(k,[["render",_]]);var C=y},8982:function(t,e,i){i.r(e),i.d(e,{default:function(){return v}});var s=i(3396),a=i(7139);const r={class:"container"},o={key:0},n={class:"mb-4 fs-5"},c={class:"text-primary mx-2"},u={key:1,class:"mb-4 fs-5"},l={class:"text-primary mx-2"};function d(t,e,i,d,p,h){const m=(0,s.up)("LoadingCom"),g=(0,s.up)("BreadcrumbCom"),b=(0,s.up)("ProductCategory");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(m,{active:p.isLoading},null,8,["active"]),(0,s._)("div",r,[(0,s.Wm)(g),h.searchData.length>0?((0,s.wg)(),(0,s.iD)("div",o,[(0,s._)("p",n,[(0,s.Uk)("以下是"),(0,s._)("span",c,(0,a.zw)(h.searchInput),1),(0,s.Uk)("的搜尋結果：")]),(0,s.Wm)(b,{products:h.searchData,onGetProducts:e[0]||(e[0]=t=>h.getProducts())},null,8,["products"])])):((0,s.wg)(),(0,s.iD)("p",u,[(0,s.Uk)("目前無"),(0,s._)("span",l,(0,a.zw)(h.searchInput),1),(0,s.Uk)("的搜尋結果，請再次搜尋。")]))])],64)}var p=i(9390),h=i(5424),m={data(){return{products:[],isLoading:!1}},created(){this.getProducts()},methods:{getProducts(){this.isLoading=!0;const t="https://vue3-course-api.hexschool.io/api/alisonhu-api/products/all";this.axios.get(t).then((t=>{this.isLoading=!1,this.products=t.data.products}))}},computed:{searchInput(){return this.$route.query.q},searchData(){const t=new RegExp(this.searchInput,"gi");return this.products.filter((e=>e.title.match(t)))}},watch:{searchInput(t,e){0!==e.length&&e!==t&&this.$router.go(0)}},components:{BreadcrumbCom:p.Z,ProductCategory:h.Z}},g=i(89);const b=(0,g.Z)(m,[["render",d]]);var v=b}}]);
//# sourceMappingURL=982.5067c818.js.map