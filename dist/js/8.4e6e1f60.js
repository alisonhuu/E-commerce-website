"use strict";(self["webpackChunkfinalproject"]=self["webpackChunkfinalproject"]||[]).push([[8],{3008:function(t,e,r){r.r(e),r.d(e,{default:function(){return J}});var s=r(3396),l=r(7139);const a=(0,s._)("h3",null,"後台管理",-1),d={class:"my-5"},o={class:"row row-cols-md-3 row-cols-1"},i={class:"col"},c={class:"card border-primary mb-3 shadow"},n=(0,s._)("div",{class:"card-header text-white bg-primary h5 text-center"},"訂單數",-1),h={class:"card-body"},u={class:"card-title text-primary h2 text-center"},_={class:"card-text text-muted text-end"},p={class:"col"},w={class:"card border-primary mb-3 shadow"},g=(0,s._)("div",{class:"card-header text-white bg-primary h5 text-center"},"平均交易金額",-1),b={class:"card-body"},m={class:"card-title text-primary h2 text-center"},x={class:"card-text text-muted text-end"},y={class:"col"},v={class:"card border-primary mb-3 shadow"},f=(0,s._)("div",{class:"card-header text-white bg-primary h5 text-center"},"營業額",-1),z={class:"card-body"},$={class:"card-title text-primary h2 text-center"},D={class:"card-text text-muted text-end"},k=(0,s._)("h5",null,"最新訂單",-1),Y={class:"bg-light border rounded mt-3 border-bottom-0"},H={class:"table"},C=(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",{width:"100"},"訂單編號"),(0,s._)("th",{width:"100",class:"d-none d-md-table-cell"},"購買時間"),(0,s._)("th",{width:"100"},"購買人"),(0,s._)("th",{width:"220"},"購買品項"),(0,s._)("th",{width:"120"},"應付金額")])],-1),K={class:"fs-6"},O={class:"d-none d-md-table-cell"},j={class:"text-nowrap"},T=(0,s._)("h5",{class:"mt-5"},"最新商品",-1),A={class:"bg-light border rounded mt-3 border-bottom-0"},P={class:"table"},q=(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",{width:"50"},"圖片"),(0,s._)("th",{width:"120"},"商品名稱"),(0,s._)("th",{width:"100"},"原價"),(0,s._)("th",{width:"100"},"售價")])],-1),E=(0,s._)("h5",{class:"mt-5"},"最新優惠券",-1),F={class:"bg-light border rounded mt-3 border-bottom-0"},I={class:"table"},M=(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",null,"名稱"),(0,s._)("th",null,"優惠碼"),(0,s._)("th",null,"打折"),(0,s._)("th",null,"到期日")])],-1);function U(t,e,r,U,Z,B){return(0,s.wg)(),(0,s.iD)(s.HY,null,[a,(0,s._)("section",d,[(0,s._)("div",o,[(0,s._)("div",i,[(0,s._)("div",c,[n,(0,s._)("div",h,[(0,s._)("h5",u,(0,l.zw)(Z.orders.length)+" 筆",1),(0,s._)("p",_,"統計至 "+(0,l.zw)(B.date),1)])])]),(0,s._)("div",p,[(0,s._)("div",w,[g,(0,s._)("div",b,[(0,s._)("h5",m,(0,l.zw)(t.$filters.currency(B.ordersTotal/Z.orders.length)),1),(0,s._)("p",x,"統計至 "+(0,l.zw)(B.date),1)])])]),(0,s._)("div",y,[(0,s._)("div",v,[f,(0,s._)("div",z,[(0,s._)("h5",$,(0,l.zw)(t.$filters.currency(B.ordersTotal)),1),(0,s._)("p",D,"統計至 "+(0,l.zw)(B.date),1)])])])])]),k,(0,s._)("div",Y,[(0,s._)("table",H,[C,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(Z.orders.slice(0,5),(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e.id},[(0,s._)("td",K,(0,l.zw)(e.id.substring(3,10)),1),(0,s._)("td",O,(0,l.zw)(t.$filters.date(e.create_at)),1),(0,s._)("td",null,(0,l.zw)(e.user.name),1),(0,s._)("td",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.products,(t=>((0,s.wg)(),(0,s.iD)("small",{key:t.id,class:"d-block"},(0,l.zw)(t.product.title)+" x "+(0,l.zw)(t.qty),1)))),128))]),(0,s._)("td",j,(0,l.zw)(t.$filters.currency(e.total)),1)])))),128))])])]),T,(0,s._)("div",A,[(0,s._)("table",P,[q,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(Z.products.slice(0,5),(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e.id},[(0,s._)("td",null,[(0,s._)("div",{style:(0,l.j5)([{backgroundImage:`url(${e.imageUrl})`},{height:"50px"}]),class:"bg-center"},null,4)]),(0,s._)("td",null,(0,l.zw)(e.title),1),(0,s._)("td",null,(0,l.zw)(t.$filters.currency(e.origin_price)),1),(0,s._)("td",null,(0,l.zw)(t.$filters.currency(e.price)),1)])))),128))])])]),E,(0,s._)("div",F,[(0,s._)("table",I,[M,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(Z.coupons.slice(0,5),(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e.id},[(0,s._)("td",null,(0,l.zw)(e.title),1),(0,s._)("td",null,(0,l.zw)(e.code),1),(0,s._)("td",null,(0,l.zw)(e.percent)+"%",1),(0,s._)("td",null,(0,l.zw)(t.$filters.date(e.due_date)),1)])))),128))])])])],64)}var Z={data(){return{orders:[],products:[],coupons:[]}},created(){this.getOrders(),this.getProducts(),this.getCoupons()},methods:{getOrders(t=1){const e=`https://vue3-course-api.hexschool.io/api/alisonhu-api/admin/orders?page=${t}`;this.axios.get(e).then((t=>{this.orders=t.data.orders;const e=t.data.pagination.total_pages;if(t.data.pagination.has_next)for(let r=2;r<=e;r++)this.getAllOrders(r)}))},getAllOrders(t){const e=`https://vue3-course-api.hexschool.io/api/alisonhu-api/admin/orders?page=${t}`;this.axios.get(e).then((t=>{this.orders=this.orders.concat(t.data.orders)}))},getProducts(t=1){const e=`https://vue3-course-api.hexschool.io/api/alisonhu-api/admin/products?page=${t}`;this.axios.get(e).then((t=>{this.products=t.data.products}))},getCoupons(t=1){const e=`https://vue3-course-api.hexschool.io/api/alisonhu-api/admin/coupons?page=${t}`;this.axios.get(e).then((t=>{this.coupons=t.data.coupons}))}},computed:{date(){const t=new Date,e=t.getFullYear(),r=t.getMonth()+1,s=t.getDate();return`${e} 年 ${r} 月 ${s} 日`},ordersTotal(){let t=0;return this.orders.forEach((e=>{t+=e.total})),t}}},B=r(89);const G=(0,B.Z)(Z,[["render",U]]);var J=G}}]);
//# sourceMappingURL=8.4e6e1f60.js.map