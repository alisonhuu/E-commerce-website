"use strict";(self["webpackChunkfinalproject"]=self["webpackChunkfinalproject"]||[]).push([[628],{628:function(t,e,s){s.r(e),s.d(e,{default:function(){return q}});var r=s(3396),o=s(7139);const l={class:"container"},c=(0,r._)("h4",{class:"text-center"},"請確認以下資料是否正確",-1),a=(0,r._)("h4",{class:"mb-5 font-mirza text-center"},"Check",-1),d={class:"col-11 col-md-8 mx-auto"},n=(0,r._)("span",{class:"bg-primary py-2 px-4 fw-bold rounded-top text-light"},"購物明細",-1),i={class:"table border border-3 border-primary mt-1 mb-5"},u=(0,r._)("thead",null,[(0,r._)("tr",null,[(0,r._)("th",{scope:"col",class:"col-3 col-md-5"},"商品"),(0,r._)("th",{scope:"col"},"名稱"),(0,r._)("th",{class:"text-nowrap",scope:"col"},"數量"),(0,r._)("th",{scope:"col"},"小計")])],-1),p={class:"text-end"},h={colspan:"3",class:"fw-bold text-end"},_={key:0,class:"text-success"},b=(0,r._)("p",null,"總金額",-1),m={class:"fw-bold text-end"},g={key:0,class:"text-success text-nowrap"},w={class:"text-nowrap"},x=(0,r._)("span",{class:"bg-primary py-2 px-4 fw-bold rounded-top text-light"},"收件人資料",-1),f={class:"table border border-3 border-primary mt-1"},y=(0,r._)("th",{scope:"col"},"姓名",-1),k=(0,r._)("th",{scope:"col"},"電話",-1),v=(0,r._)("th",{scope:"col"},"Email",-1),z=(0,r._)("th",{scope:"col"},"地址",-1),$=(0,r._)("th",{scope:"col"},"備註",-1),I=(0,r._)("div",{class:"text-end mt-4"},[(0,r._)("button",{type:"submit",class:"btn-shadow btn btn-primary link-light px-4"}," 確認結帳")],-1);function j(t,e,s,j,D,L){const C=(0,r.up)("LoadingCom");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(C,{active:D.isLoading},null,8,["active"]),(0,r._)("div",l,[c,a,(0,r._)("form",{class:"row",onSubmit:e[0]||(e[0]=(...t)=>L.checkout&&L.checkout(...t))},[(0,r._)("div",d,[n,(0,r._)("table",i,[u,(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(D.order.products,(e=>((0,r.wg)(),(0,r.iD)("tr",{key:e.id},[(0,r._)("td",null,[(0,r._)("div",{style:(0,o.j5)({backgroundImage:`url(${e.product.imageUrl})`}),class:"sm-imgs bg-center"},null,4)]),(0,r._)("td",null,(0,o.zw)(e.product.title),1),(0,r._)("td",null,(0,o.zw)(e.qty),1),(0,r._)("td",p,(0,o.zw)(t.$filters.currency(e.total)),1)])))),128))]),(0,r._)("tfoot",null,[(0,r._)("tr",null,[(0,r._)("td",h,[L.discount?((0,r.wg)(),(0,r.iD)("p",_,"折扣")):(0,r.kq)("",!0),b]),(0,r._)("td",m,[L.discount?((0,r.wg)(),(0,r.iD)("p",g,"- "+(0,o.zw)(t.$filters.currency(L.discount)),1)):(0,r.kq)("",!0),(0,r._)("p",w,(0,o.zw)(t.$filters.currency(D.order.total)),1)])])])]),x,(0,r._)("table",f,[(0,r._)("tbody",null,[(0,r._)("tr",null,[y,(0,r._)("td",null,(0,o.zw)(D.order.user.name),1)]),(0,r._)("tr",null,[k,(0,r._)("td",null,(0,o.zw)(D.order.user.tel),1)]),(0,r._)("tr",null,[v,(0,r._)("td",null,(0,o.zw)(D.order.user.email),1)]),(0,r._)("tr",null,[z,(0,r._)("td",null,(0,o.zw)(D.order.user.address),1)]),(0,r._)("tr",null,[$,(0,r._)("td",null,(0,o.zw)(D.order.message),1)])])]),I])],32)])],64)}s(7658);var D={data(){return{order:{user:{},products:{}},orderId:"",isLoading:!1}},created(){this.orderId=this.$route.params.orderId,this.getOrder()},methods:{getOrder(){const t=`https://vue3-course-api.hexschool.io/api/alisonhu-api/order/${this.orderId}`;this.axios.get(t).then((t=>{this.order=t.data.order}))},checkout(){this.isLoading=!0;const t=`https://vue3-course-api.hexschool.io/api/alisonhu-api/pay/${this.orderId}`;this.axios.post(t).then((t=>{this.isLoading=!1,this.PushMessageState(t,"付款"),this.$router.push("/")}))}},computed:{discount(){let t=0;const e=Object.values(this.order.products);return e.forEach((e=>{t+=e.total})),t-this.order.total}},inject:["emitter","PushMessageState"]},L=s(89);const C=(0,L.Z)(D,[["render",j]]);var q=C}}]);
//# sourceMappingURL=628.102da18a.js.map