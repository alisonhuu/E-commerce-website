"use strict";(self["webpackChunkfinalproject"]=self["webpackChunkfinalproject"]||[]).push([[183],{5424:function(t,i,s){s.d(i,{Z:function(){return w}});var e=s(3396),o=s(9242),a=s(7139);const r={class:"my-4"},n={class:"row row-cols-2 row-cols-md-4 gx-3 gy-5"},c=["onClick"],d={class:"position-absolute bottom-0 end-0 p-1"},l=["onClick"],u=["onClick","disabled"],p=(0,e._)("i",{class:"bi bi-cart"},null,-1),g=[p],h={key:0,class:"position-absolute top-0 start-0 px-2 py-1"},m=(0,e._)("i",{class:"bi bi-gift text-danger"},null,-1),b=[m],v=["onClick"],f={class:"card-text fw-bold text-secondary mt-2"};function y(t,i,s,p,m,y){const k=(0,e.up)("LoadingCom");return(0,e.wg)(),(0,e.iD)(e.HY,null,[(0,e.Wm)(k,{active:m.isLoading},null,8,["active"]),(0,e._)("main",null,[(0,e._)("section",r,[(0,e._)("div",n,[((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(s.products,(i=>((0,e.wg)(),(0,e.iD)("div",{class:"col",key:i.id},[(0,e._)("a",{href:"javascript:;",onClick:(0,o.iM)((t=>y.getProduct(i.id)),["prevent"])},[(0,e._)("div",{style:(0,a.j5)({backgroundImage:`url(${i.imageUrl})`}),class:"product-img bg-center rounded mb-3 position-relative"},[(0,e._)("div",d,[(0,e._)("button",{class:"btn btn-sm btn-light rounded-4",type:"button",onClick:(0,o.iM)((t=>y.addToWishList(i)),["stop"])},[(0,e._)("i",{class:(0,a.C_)(["bi",y.heart(i)])},null,2)],8,l),(0,e._)("button",{class:"btn btn-sm btn-light rounded-4 ms-1",type:"button",onClick:(0,o.iM)((t=>y.addToCart(i)),["stop"]),disabled:m.loadingItem===i.id},g,8,u)]),i.is_gift?((0,e.wg)(),(0,e.iD)("div",h,b)):(0,e.kq)("",!0)],4)],8,c),(0,e._)("a",{href:"javascript:;",onClick:(0,o.iM)((t=>y.getProduct(i.id)),["prevent"]),class:"h6 link-dark-h"},(0,a.zw)(i.title),9,v),(0,e._)("p",f,(0,a.zw)(t.$filters.currency(i.price)),1)])))),128))])])])],64)}s(7658);var k={data(){return{isLoading:!1,loadingItem:""}},props:{products:{type:Array,default(){return[]}}},methods:{getProduct(t){this.$router.push(`/user/product/${t}`)},addToCart(t){this.loadingItem=t.id,this.isLoading=!0;const i="https://vue3-course-api.hexschool.io/api/alisonhu-api/cart",s={product_id:t.id,qty:1};this.axios.post(i,{data:s}).then((t=>{this.loadingItem="",this.isLoading=!1,this.PushMessageState(t,"加入購物車"),this.emitter.emit("cart-qty")}))},addToWishList(t){localStorage.getItem(t.id)?(localStorage.removeItem(t.id),this.emitter.emit("wished-qty")):(localStorage.setItem(t.id,JSON.stringify(t)),this.emitter.emit("wished-qty")),this.$emit("get-products")},heart(t){return localStorage.getItem(t.id)?"bi-heart-fill":"bi-heart"}},emits:["get-products"],inject:["emitter","PushMessageState"]},C=s(89);const _=(0,C.Z)(k,[["render",y]]);var w=_},8183:function(t,i,s){s.r(i),s.d(i,{default:function(){return d}});var e=s(3396);function o(t,i,s,o,a,r){const n=(0,e.up)("LoadingCom"),c=(0,e.up)("ProductCategory");return(0,e.wg)(),(0,e.iD)(e.HY,null,[(0,e.Wm)(n,{active:a.isLoading},null,8,["active"]),(0,e.Wm)(c,{products:a.plants,onGetProducts:i[0]||(i[0]=t=>r.getProducts())},null,8,["products"])],64)}var a=s(5424),r={data(){return{products:[],plants:[],isLoading:!1}},created(){this.getProducts()},methods:{getProducts(){this.isLoading=!0;const t="https://vue3-course-api.hexschool.io/api/alisonhu-api/products/all";this.axios.get(t).then((t=>{this.isLoading=!1,this.products=t.data.products,this.getPlants()}))},getPlants(){this.plants=this.products.filter((t=>"plants"===t.category))}},components:{ProductCategory:a.Z}},n=s(89);const c=(0,n.Z)(r,[["render",o]]);var d=c}}]);
//# sourceMappingURL=183.ae8b1eef.js.map